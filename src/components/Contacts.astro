---
import Copiable from "./Copiable.astro";
import Copy from "./icons/Copy.astro";
import Discord from "./icons/Discord.astro";
import GitHub from "./icons/GitHub.astro";
import HandleCopiable from "./scripts/HandleCopiable.astro";
---

<div class="contacts-row-wrapper">
  <Copiable id="copy-email" text="dimasinskiy@gmail.com">
    <Copy />
    <div class="scrolling-text-wrapper">
      <p
        class="scrolling-text focus-text"
        style="--width: 360px; --quantity: 3; --animeTime: 25s;"
      >
        <span style="--index: 1">dimasinskiy@gmail.com</span>
        <span style="--index: 2">dimasinskiy@gmail.com</span>
        <span style="--index: 3">dimasinskiy@gmail.com</span>
      </p>
    </div>
  </Copiable>
  <a
    class="animated-hover"
    href="https://github.com/sinskiy"
    aria-label="GitHub account"
  >
    <GitHub size={30} />
  </a>
  <Copiable
    aria-label="@sinskiy_"
    id="copy-discord"
    class="animated-hover"
    text="@sinskiy_"
  >
    <Discord />
  </Copiable>
</div>

<style>
  .contacts-row-wrapper {
    display: flex;
  }

  #copy-email {
    flex: 1;
    position: relative;
    display: grid;
    align-items: center;
    gap: 1rem;
    grid-template-columns: auto 1fr;
  }

  #copy-email > :global(svg) {
    fill: rgb(var(--foreground));
    transition: fill 100ms;
  }
  #copy-email:hover > :global(svg) {
    fill: rgb(var(--primary));
  }

  .scrolling-text-wrapper {
    width: 100%;
    font-style: italic;
    overflow: hidden;
    transition: opacity 100ms;
  }
  #copy-email:hover > .scrolling-text-wrapper {
    opacity: 0.5;
  }

  .scrolling-text {
    position: relative;
    min-width: calc(var(--width) * var(--quantity));
    min-height: 1lh;
  }

  .scrolling-text > span {
    position: absolute;
    width: var(--width);
    inset-inline-start: 80%;
    animation: scroll var(--animeTime) linear infinite;
    animation-delay: calc(
      var(--animeTime) / var(--quantity) * (var(--index) - 1) - var(--animeTime)
    );
    color: rgb(var(--foreground));
    font-family: var(--monospace);
    overflow: hidden;
  }
  @media (prefers-reduced-motion: reduce), (update: slow) {
    .scrolling-text > span {
      animation-play-state: paused;
    }
  }
  .scrolling-text:hover span {
    animation-play-state: paused;
  }

  @keyframes scroll {
    100% {
      inset-inline-start: calc(0px - var(--width));
    }
  }
</style>

<HandleCopiable />
